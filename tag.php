<!DOCTYPE html>
<html lang="ru-RU" class="no-js no-svg">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
    <link rel="icon" href="https://travel-mania.org/favicon.ico" type="image/x-icon">
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <title>–≠–∫—Å–∫—É—Ä—Å–∏–∏ –≤–æ –§—Ä–∞–Ω—Ü–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ 2020 ü•á —Ü–µ–Ω—ã –∏ –æ–ø–∏—Å–∞–Ω–∏–µ - Travel Mania ü•á</title>
    <meta name="keywords" content="—ç–∫—Å–∫—É—Ä—Å–∏–∏, –§—Ä–∞–Ω—Ü–∏—è , —Ä—É—Å—Å–∫–∏–π, –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –≥–∏–¥—ã, 2020 –∞–≤—Ç–æ—Ä—Å–∫–∏–µ, —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ, –æ–±–∑–æ—Ä–Ω—ã–µ, –ø–µ—à–µ—Ö–æ–¥–Ω—ã–µ, –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ, –∫—É–ø–∏—Ç—å, –∑–∞–∫–∞–∑–∞—Ç—å, –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, —Ü–µ–Ω–∞, –Ω–µ–¥–æ—Ä–æ–≥–æ, –¥–µ—à–µ–≤–æ, —Å–∫–∏–¥–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–ø–∏—Å–æ–∫, –ø—Ä–∞–π—Å, —Ç—Ä–∞–≤—ç–ª, –º–∞–Ω–∏—è, travel, mania" />
    <meta name="description" content="‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –≤–æ –§—Ä–∞–Ω—Ü–∏–∏ —Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ –∏ —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–º–∏ –≥–∏–¥–∞–º–∏. –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–∫—Å–∫—É—Ä—Å–∏–π –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ü–µ–Ω–∞–º 2020 –≥–æ–¥–∞. –ü–µ—Ä–µ–¥ –∑–∞–∫–∞–∑–æ–º –ª—é–±–æ–π —ç–∫—Å–∫—É—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –≥–∏–¥—É –Ω–∞ —Å–∞–π—Ç–µ. –£ –Ω–∞—Å —Å–æ–±—Ä–∞–Ω—ã –ª—É—á—à–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –≤–æ –§—Ä–∞–Ω—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–º–∞–Ω—ã –∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≥–∏–¥–∞–º–∏." />
    <link rel="icon" href="https://travel-mania.org/wp-content/uploads/2019/05/cropped-Logo-32x32.png" sizes="32x32" />
    <link rel="apple-touch-icon" href="https://travel-mania.org/wp-content/uploads/2019/05/cropped-Logo-180x180.png" />
    <meta name="msapplication-TileImage" content="https://travel-mania.org/wp-content/uploads/2019/05/cropped-Logo-270x270.png" />

    <link rel="preload" as="style" type="text/css" href="/assets/css/slick.min.css?v=0.6" onload="this.rel='stylesheet'">
    <link rel="preload" as="style" type="text/css" href="/assets/css/simplebar.min.css?v=0.6" onload="this.rel='stylesheet'">
    <link rel='stylesheet' href='/style.css?v=0.6' type='text/css' media='all' />

    <script type='text/javascript' src='/assets/js/jquery.min.js?v=0.6'></script>
    <script type="text/javascript" src="/assets/js/jquery.fancybox.min.js?v=0.6" defer></script>
    <script type="text/javascript" src="/assets/js/simplebar.min.js?v=0.6" defer></script>
    <script type="text/javascript" src="/assets/js/lazysizes.min.js?v=0.6" defer></script>
    <script type="text/javascript" src="/assets/js/slick.min.js?v=0.6" defer></script>
    <script type="text/javascript" src="/assets/js/main.js?v=0.6" defer></script>

</head>

<?php
$des_countries_path = $_SERVER['DOCUMENT_ROOT'] . '/description/des-country.json';
$des_countries = file_get_contents($des_countries_path);
$des_countries = json_decode($des_countries);

$current_country = $list[0]->country->name_en;
$current_country = str_replace(" ", "-", $current_country);

$current_des_countries = array_filter($des_countries, function ($country) use ($current_country) {
    return $country->name == $current_country;
});
$current_des_country = reset($current_des_countries); 

$tag_listTags = getData('https://experience.tripster.ru/api/citytags/?city=' . $tag_list[0]->city->id);
$tag_listTagsNew = $tag_listTags->results;
?>

<body>
    <section class="top">
        <div class="top__slider">
            <div id="top-images-city" class="image-top_slider <?php echo ($current_des_city->images) ?>">
                <?php if ($current_des_city->images != "") : ?>
                    <?php $indexImg = 0; ?>
                    <?php foreach ($current_des_city->images as $imgUrls) {
                        if ($indexImg == 0) { ?>
                            <img src="<?php echo ($imgUrls) ?>" alt="">
                        <?php }
                        $indexImg++; ?>
                    <?php }  ?>
                <?php else : ?>
                    <img style="opacity:0" src="/wp-content/uploads/Main/Zaglushka-1-min.jpg" alt="">
                    <img style="opacity:0" src="/wp-content/uploads/Main/Zaglushka-2-min.jpg" alt="">
                <?php endif; ?>
            </div>
            <div class="top__slider-text">
                <div class="container">
                    <div class="top__content-text">
                        <h1>–ê–≤—Ç–æ—Ä—Å–∫–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase); ?></h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="breadcrumbs" itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList">
            <div class="container breadcrumbs-wrap">
                <div class="breadcrumbs-item" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem">
                    <div class="breadcrumbs__block">
                        <a class="breadcrumbs__link" href="/" itemprop="item">
                            <span itemprop="name">–ì–ª–∞–≤–Ω–∞—è</span>
                            <meta itemprop="position" content="1">
                        </a>
                    </div>
                    <div class="breadcrumbs__arrow">
                        <img src="/assets/images/arrow-bread.png" alt="">
                    </div>
                </div>
                <div class="breadcrumbs-item" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem">
                    <div class="breadcrumbs__block">
                        <a class="breadcrumbs__link" href="/<?= str_replace('+', '-', $country__name_en) ?>/" itemprop="item">
                            <span itemprop="name"><?php echo ($list[0]->city->country->name_ru) ?></span>
                            <meta itemprop="position" content="2">
                        </a>
                    </div>
                    <div class="breadcrumbs__arrow">
                        <img src="/assets/images/arrow-bread.png" alt="">
                    </div>
                </div>
                <div class="breadcrumbs-item" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem">
                    <div class="breadcrumbs__block">
                        <meta itemprop="item" content="/<?= str_replace('+', '-', $country__name_en) ?>/<?= str_replace('+', '-', $city__name_en) ?>/">
                        <p class="breadcrumbs__text">
                            <span itemprop="name"><?php echo ($list[0]->city->name_ru) ?></span>
                        </p>
                        <meta itemprop="position" content="3">
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="border-box">
                <h2>–≠–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase);
                                echo ($textRu); ?></h2>
                <div id="top-text-city" class="border-box__text">
                    <?php if ($current_des_city->textTop != "") : ?>
                        <?php echo $current_des_city->textTop; ?>
                        <?php else : ?>Travel Mania –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–≤—Ç–æ—Ä—Å–∫–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase); ?> –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –ö–∞–∂–¥—ã–π –∂–µ–ª–∞—é—â–∏–π –º–æ–∂–µ—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é —ç–∫—Å–∫—É—Ä—Å–∏—é, –∫–∞–∫ –≥—Ä—É–ø–ø–æ–≤—É—é, —Ç–∞–∫ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –∏ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É.
                    <?php endif; ?>
                </div>
                <div class="advantages-wrap">
                    <div class="advantages-item">
                        <h3>–û–Ω–ª–∞–π–Ω –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                        <div class="advantages-text">–í—ã–±–µ—Ä–µ—Ç–µ –≥–æ—Ä–æ–¥, –ø–æ–¥–±–µ—Ä–∏—Ç–µ —ç–∫—Å–∫—É—Ä—Å–∏—é –∏ —Å–¥–µ–ª–∞–π—Ç–µ –±—Ä–æ–Ω—å –Ω–∞ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É</div>
                    </div>
                    <div class="advantages-item">
                        <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –≥–∏–¥–æ–º</h3>
                        <div class="advantages-text">–î–æ –æ–ø–ª–∞—Ç—ã —ç–∫—Å–∫—É—Ä—Å–∏–∏ –æ–±—Å—É–¥–∏—Ç–µ —Å –≥–∏–¥–æ–º –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏ –∑–∞–¥–∞–π—Ç–µ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã</div>
                    </div>
                    <div class="advantages-item">
                        <h3>–û–ø–ª–∞—á–∏–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ 20%</h3>
                        <div class="advantages-text">–ü—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 20% –∫–∞—Ä—Ç–æ–π, –æ—Å—Ç–∞–ª—å–Ω—É—é —Å—É–º–º—É –ø–ª–∞—Ç–∏—Ç–µ –≥–∏–¥—É –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ</div>
                    </div>
                </div>
            </div>
            <div style="display:none;" id="type-page">city</div>
            <div style="opacity:0" id="city-name"><?php echo ($list[0]->city->name_en); ?> </div>
        </div>
    </section>
    <section class="list-tags">
    <?php foreach ($tag_listTagsNew as $item) { ?>
        <?php var_dump($item); ?>
        <div class="list-item"><a href="/<?= str_replace('+', '-', $country__name_en) ?>/<?= str_replace('+', '-', $city__name_en) ?>/tag-<?php echo $tag_list[0]->city->id; ?>:<?php echo($item->slug); ?>/"><?php echo($item->name); ?></a></div>
    <? }?>
    </section>

    <section class="popular-tours tours">
        <div class="container">
            <div id="slick-tours" class="slick-tours row">
                <?php $count = 1 ?>
                <?php $countReviews = 0 ?>
                <?php foreach ($list as $item) { ?>
                    <div id="slick-tours__item " class="slick-tours__item <?php if ($count > 24) { ?>hide<?php } ?>">
                        <div class="slick-tours__wrap">
                            <div class="slick-tours__item-img ">
                                <?php
                                $countImg = 0;
                                $arrayImg = [];
                                foreach ($item->photos as $img) {
                                    if ($countImg != 0 && $countImg <= 6) {
                                        array_push($arrayImg,  $img->thumbnail);
                                    }
                                    $countImg++;
                                }
                                ?>
                                <a class="link" href="/<?= str_replace('+', '-', $country__name_en) ?>/<?= str_replace('+', '-', $city__name_en) ?>/excursion-<?= $item->id; ?>/" data-images="<?php echo htmlspecialchars(json_encode($arrayImg)) ?>">
                                    <img class="static" src="<?php echo $item->photos['0']->thumbnail ?>" alt="">
                                </a>
                                <?php if ($item->price->discount->value) { ?>
                                    <div class="slick-tours__item-img-box">
                                        <span>–°–∫–∏–¥–∫–∞</span> <br>
                                        <span class="slick-tours__item-img-span "><?php echo ($item->price->discount->value * 100) ?>%</span>
                                    </div>
                                <?php } ?>
                                <?php if ($item->tags[0]->name) { ?>
                                    <div class="slick-tours__tag"><?php echo ($item->tags[0]->name) ?></div>
                                <?php } ?>
                            </div>
                            <div class="item-time-rating">
                                <span class="item-time">
                                    <img src="/assets/images/icon-time.png" alt=""> <span><?php echo $item->duration ?> </span>
                                </span>
                                <?php if ($item->rating) { ?>
                                    <span class="item-rating">
                                        <span style="display:none;" class="reviews-rating"><?php echo $item->rating ?> </span>
                                        <div class="star-rating-item">
                                            <span class="reviews-rating-img" style="width: <?php echo ($item->rating * 20) ?>%">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                            </span>
                                            <span class="reviews-rating-img bac">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star" src="/assets/images/icon-star-1.png" alt="">
                                            </span>
                                        </div>
                                    </span>
                                <?php } ?>

                            </div>
                            <div class="tours__item-content ">
                                <div class="item-title ">
                                    <?php
                                    $city_name = str_replace('√©', 'e', $town->name_en);
                                    $city_name = str_replace('—ë', 'e', $town->name_en);
                                    $city_name = str_replace("'", '', $city_name);
                                    $city_name = str_replace("√≥", 'o', $city_name);
                                    if ($city__name_en == 'Villefranche-sur-Sa√¥ne') {
                                        $city__name_en = "Villefranche-sur-Saone";
                                    }
                                    ?>
                                    <a href="/<?= str_replace('+', '-', $country__name_en) ?>/<?= str_replace('+', '-', $city__name_en) ?>/excursion-<?= $item->id; ?>/"><?php echo $item->title ?> </a>
                                </div>
                                <div class="item-price-guide">
                                    <div class="item-guide">
                                        <div class="item-guide-photo"> <img src="<?php echo $item->guide->avatar->medium  ?>" alt=""> </div>
                                        <div class="item-guide-name"><?php echo $item->guide->first_name ?> <br>
                                            <?php
                                            $city_name = str_replace('√©', 'e', $item->name_en);
                                            $city_name = str_replace("'", '', $city_name);
                                            ?>
                                        </div>
                                    </div>
                                    <?php array_push($priceAll, $item->price->value); ?>
                                    <?php if ($item->rating) {
                                        $reviewsAll = $reviewsAll + $item->rating;
                                        $countReviews++;
                                    }; ?>
                                    <?php if ($item->review_count) {
                                        $reviewsAllCount = $reviewsAllCount + $item->review_count;
                                    }; ?>
                                    <div class="item-price">
                                        <div class="item-price-value"> <?php echo $item->price->value . ' ' . $item->price->currency ?></div>
                                        <div class="item-price-people"> <?php echo $item->price->unit_string  ?> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <?php $count++ ?>
                <?php } ?>
            </div>
            <button id="btn-more" class="btn-more">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë... <span id="span-col">–≤—Å–µ–≥–æ <?php echo (count($list)) ?></span> </button>
        </div>
    </section>
    <div itemscope="itemscope" itemtype="http://schema.org/Product">
        <meta itemprop="name" content="<?php echo ("–ê–≤—Ç–æ—Ä—Å–∫–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏" . $list[0]->city->in_obj_phrase); ?>">
        <meta itemprop="description" content="‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase); ?> —Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏ –∏ —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–º–∏ –≥–∏–¥–∞–º–∏. –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–∫—Å–∫—É—Ä—Å–∏–π –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ü–µ–Ω–∞–º 2020 –≥–æ–¥–∞. –ü–µ—Ä–µ–¥ –∑–∞–∫–∞–∑–æ–º –ª—é–±–æ–π —ç–∫—Å–∫—É—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –≥–∏–¥—É –Ω–∞ —Å–∞–π—Ç–µ. –£ –Ω–∞—Å —Å–æ–±—Ä–∞–Ω—ã –ª—É—á—à–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase); ?>, –∫–æ—Ç–æ—Ä—ã–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–º–∞–Ω—ã –∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≥–∏–¥–∞–º–∏.">
        <span itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/aggregateoffer">
            <meta itemprop="lowprice" content="<?php echo (min($priceAll)) ?>">
            <meta itemprop="highprice" content="<?php echo (max($priceAll)) ?>">
            <meta itemprop="pricecurrency" content="<?php echo ($list[0]->price->currency); ?>"></span>
        <span itemprop="aggregaterating" itemscope="itemscope" itemtype="http://schema.org/aggregaterating">
            <?php if (($reviewsAll / $countReviews) > 0) { ?>
                <meta itemprop="ratingValue" content="<?php echo ($reviewsAll / $countReviews); ?>">
            <?php } ?>
            <?php if ($reviewsAllCount > 0) { ?>
                <meta itemprop="reviewCount" content="<?php echo ($reviewsAllCount); ?>">
            <?php } ?>
        </span>
    </div>

    <section class="video">
        <div class="container">
            <div class="border-box">
                <h2>–ì–ª–∞–≤–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–æ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ <?php echo ($list[0]->city->in_obj_phrase); ?></h2>
                <div class="video-box">
                    <div id="video-text-city" class="video__text">
                        <?php if ($current_des_city->textButton != "") {
                            echo ($current_des_city->textButton);
                        } else { ?>
                            –í –±–ª–∏–∂–∞–π—à–∏–µ –≤—Ä–µ–º—è –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≥–ª–∞–≤–Ω—ã—Ö —ç–∫—Å–∫—É—Ä—Å–∏–æ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ <?php echo ($list[0]->city->in_obj_phrase); ?>.
                        <?php } ?>
                    </div>
                </div>
                <h2>–ö–∞–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏—é</h2>
                <div class="video-box">
                    <div>
                        <p>–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏–∏ <?php echo ($list[0]->city->in_obj_phrase); ?> –ø–æ–º–æ–∂–µ—Ç –Ω–∞—à –≤–∏–¥–∏–æ–ø—Ä–∏–º–µ—Ä. –ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –í—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ—Å—å —Å —Ç–µ–º–∞—Ç–∏–∫–æ–π —ç–∫—Å–∫—É—Ä—Å–∏–∏ –∏ –≤—ã–±–∏—Ä–∏—Ç–µ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –≥–∏–¥—É. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –∏ —É–∑–Ω–∞–π—Ç–µ –≤—Å–µ –Ω–∞—à–∏ –ø—Ä–∏–µ–º—É—â–µ—Å—Ç–≤–∞.</p>
                        <video controls="controls" playsinline poster="/assets/images/TRAVEL-MANIA-EXMP.png">
                            <source src="/assets/video/TRAVEL-MANIA-EXMP.mp4" type="video/webm">
                            <source src="/assets/video/TRAVEL-MANIA-EXMP.mp4" type="video/mp4">
                        </video>
                        <p class="autor">
                            –í–∏–¥–µ–æ: ¬© Travel Mania
                        </p>
                    </div>
                    <div class="video__text">
                        <p>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å–∞–π—Ç, –ø—Ä–∏ —ç—Ç–æ–º –í—ã –æ–±—â–∞–µ—Ç–µ—Å—å –Ω–∞–ø—Ä—è–º—É—é —Å –≥–∏–¥–æ–º –∏ –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –µ–º—É –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å, –ø–æ–∫–∞ –í—ã –Ω–µ –ø—Ä–æ—è—Å–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–ª—è —Å–µ–±—è –¥–µ—Ç–∞–ª–∏.</p>
                    </div>
                </div>
            </div>

    </section>

    <script>
        function slideFunc() {
            $("#top-images-city img").css({
                "opacity": "1",
                "display": "block"
            });
        }
        setTimeout(slideFunc, 1000);

        $(document).ready(function() {
            initslidertour();
        });

        var timeout = false;
        let coordinatesYT = window.pageYOffset;
        let coordinatesYB = coordinatesYT + window.innerHeight;
        let elements = document.querySelectorAll(".slick-tours__item-img ");
        let elementsArray = [];
        let currentElement;

        function editElemsTour() {
            elements.forEach(function(elem) {
                if (!elem.classList.contains("hide")) {
                    elementsArray.push({
                        element: elem,
                        top: elem.getBoundingClientRect().top,
                        bottom: coordinatesYB - elem.getBoundingClientRect().bottom,
                        rate: 0
                    })
                }
            })

            window.onscroll = function() {
                if (timeout !== false) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function() {
                    editCoordinates();
                }, 100);
            };
            editCoordinates();

            function editCoordinates() {
                coordinatesYT = window.pageYOffset;
                coordinatesYB = coordinatesYT + window.innerHeight;

                elementsArray.forEach(function(elem) {
                    elem.top = elem.element.getBoundingClientRect().top;
                    elem.bottom = coordinatesYB - elem.element.getBoundingClientRect().bottom;
                    elem.rate = calculateRate(elem.element.getBoundingClientRect(), elem.element);
                })
            }

            function calculateRate(rect, item) {
                let rateTop = rect.top + pageYOffset;
                if (rateTop >= pageYOffset && rect.bottom + pageYOffset <= coordinatesYB) {
                    if (currentElement != item) {
                        edidVisual(item, true);
                        currentElement = item;
                    }
                } else {
                    edidVisual(item, false);
                }
            }

            function edidVisual(item, pause) {
                if (pause) {
                    let urls = $(item).find(".link").data("images");
                    if (!$(item).find(".new-img").length) {
                        for (i = 0; i < urls.length; i++) {
                            $(item).find(".link").append('<img class="new-img" src="' + urls[i] + '" />');
                        }
                    }
                    if ($(item).find(".slick-track").length == 0) {
                        $(item).find(".link").on('init', function(event, slick) {
                            var initSlide = slick.slickCurrentSlide();
                            var slickDots = slick.$dots[0];
                            slickDots.childNodes[initSlide].classList.add("slick-current");
                        });
                        $(item).find(".link").on('beforeChange', function(event, slick, currentSlide, nextSlide) {
                            var slickDots = slick.$dots[0];
                            slickDots.childNodes[currentSlide].classList.remove("slick-current");
                            slickDots.childNodes[nextSlide].classList.add("slick-current");
                        });
                        $(item).find(".link").slick({
                            arrows: false,
                            dots: true,
                            autoplay: true,
                            autoplaySpeed: 2000,
                            pauseOnHover: false,
                            pauseOnFocus: false,
                            fade: true,
                            cssEase: 'linear'
                        });
                    } else {
                        $(item).find(".link .slick-active").addClass("slick-current");
                        $(item).find(".link .slick-dots").css("opacity", "1");
                        $(item).find(".link").slick('slickPlay');
                    }
                } else {
                    if ($(item).find(".slick-track").length) {
                        $(item).find(".link .slick-dots").css("opacity", "0");
                        $(item).find(".link .slick-active").removeClass("slick-current");
                        $(item).find(".link").slick('slickPause');
                    }
                }
            }
        }

        function initslidertour() {
            if (window.innerWidth > 500) {
                $(".slick-tours__item").hover(function(e) {
                        e = this;
                        let urls = $(this).find(".link").data("images");
                        if (!$(this).find(".new-img").length) {
                            for (i = 0; i < urls.length; i++) {
                                $(this).find(".link").append('<img class="new-img" src="' + urls[i] + '" />');
                            }
                        }
                        if ($(this).find(".slick-track").length == 0) {
                            $(this).find(".link").on('init', function(event, slick) {
                                var initSlide = slick.slickCurrentSlide();
                                var slickDots = slick.$dots[0];
                                slickDots.childNodes[initSlide].classList.add("slick-current");
                            });
                            $(this).find(".link").on('beforeChange', function(event, slick, currentSlide, nextSlide) {
                                var slickDots = slick.$dots[0];
                                slickDots.childNodes[currentSlide].classList.remove("slick-current");
                                slickDots.childNodes[nextSlide].classList.add("slick-current");
                            });
                            $(this).find(".link").slick({
                                arrows: false,
                                dots: true,
                                autoplay: true,
                                autoplaySpeed: 2000,
                                pauseOnHover: false,
                                pauseOnFocus: false,
                                fade: true,
                                cssEase: 'linear'
                            });
                        } else {
                            $(this).find(".link .slick-active").addClass("slick-current");
                            $(this).find(".link").slick('slickPlay');
                            $(this).find(".link .slick-dots").css("opacity", "1");
                        }
                    },
                    function(e) {
                        e = this;
                        $(this).find(".link .slick-active").removeClass("slick-current");
                        $(this).find(".link").slick('slickPause');
                        $(this).find(".link .slick-dots").css("opacity", "0");
                    });
            } else {
                editElemsTour();
            }
        }


        if ($(".slick-tours__item").length > 24) {
            $(".popular-tours .btn-more").css("display", "block");

        } else {
            $(".popular-tours .btn-more").css("display", "none");
        }
        let showElensVisual = 48;
        $(".popular-tours .btn-more").on("click", function() {
            let elems = $(".slick-tours__item");
            let length = $(".slick-tours__item").length;
            if (showElensVisual > length) {
                showElem(showElensVisual, true)
                initslidertour();
            } else {
                showElem(showElensVisual, false)
                initslidertour();
            }
            showElensVisual = showElensVisual + 24;
        })

        function showElem(count, btn) {
            let elems = $(".slick-tours__item");
            if (count) {
                for (i = 1; i < count; i++) {
                    if ($(elems[i]).length) {
                        elems[i].classList.remove("hide");
                    }
                }
            }
            if (btn) {
                $(".popular-tours .btn-more").css("display", "none");
            }
        }
    </script>
</body>

</html>
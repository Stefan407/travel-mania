<?php

// DATA SEO
$priceAll = [];
$reviewsAll = 0;
$reviewsAllCount = 0;
// $listTags = getData('https://experience.tripster.ru/api/citytags/?city=' . $list[0]->city->id);
// $listTagsNew = $listTags->results;


?>



<!DOCTYPE html>
<html lang="ru-RU" class="no-js no-svg">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter56569540 = new Ya.Metrika({
                        id: 56569540,
                        clickmap: true,
                        trackLinks: true,
                        accurateTrackBounce: true,
                        webvisor: true
                    });
                } catch (e) {}
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function() {
                    n.parentNode.insertBefore(s, n);
                };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else {
                f();
            }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/56569540" style="position:absolute; left:-9999px;" alt="" /></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165860897-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-165860897-1');
    </script>

    <link rel="icon" href="https://travel-mania.org/favicon.ico" type="image/x-icon">
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <title>–û–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É ‚Ä¢ Travel Mania</title>
    <meta name="keywords" content="–æ–Ω–ª–∞–π–Ω, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ, —ç–∫—Å–∫—É—Ä—Å–∏–∏, –≤–µ–±–∏–Ω–∞—Ä—ã, –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã, –ø–æ –º–∏—Ä—É, —Ä—É—Å—Å–∫–∏–π, –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Å –≥–∏–¥–æ–º, –ø–æ –º—É–∑–µ—è–º, –ø–æ –≥–æ—Ä–æ–¥—É, –≥–∞–ª–µ—Ä–µ–∏, –∫–∞—Ä—Ç–∏–Ω—ã, –≤–∏–¥–µ–æ, —Å–º–æ—Ç—Ä–µ—Ç—å, –ª—É—á—à–∏–µ, —Ç—Ä–∞–≤—ç–ª, –º–∞–Ω–∏—è, travel, mania" />
    <meta name="description" content="üü¢  –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É —Å –≥–∏–¥–∞–º–∏. –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–∫—É—Ä—Å–∏–π —Å –∂–∏–≤–æ–π –æ–Ω–ª–∞–π–Ω-—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–µ–π. –ó–∞–∫–∞–∑—ã–≤–∞–π –∏ —Å–º–æ—Ç—Ä–∏ –æ–Ω–ª–∞–π–Ω –≤ —É–¥–æ–±–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ." />
    <?php
    include 'inc/head-static.php';
    ?>

</head>

<body>
    <?php
    include 'inc/header.php';
    ?>
    <section class="top">
        <div class="top__slider">
            <div id="top-images-city" class="image-top_slider ">
                <img class="lazyload" data-src="/uploads/Main/Main-12.jpg" alt="">
            </div>
            <div class="top__slider-text">
                <div class="container">
                    <div class="top__content-text">
                        <h1>–û–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="breadcrumbs" itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList">
            <div class="container breadcrumbs-wrap">
                <div class="breadcrumbs-item" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem">
                    <div class="breadcrumbs__block">
                        <a class="breadcrumbs__link" href="/" itemprop="item">
                            <span itemprop="name">–ì–ª–∞–≤–Ω–∞—è</span>
                            <meta itemprop="position" content="1">
                        </a>
                    </div>
                    <div class="breadcrumbs__arrow">
                        <img class="lazyload" data-src="/assets/images/arrow-bread.png" alt="">
                    </div>
                </div>
                <div class="breadcrumbs-item" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem">
                    <div class="breadcrumbs__block">
                        <meta itemprop="item" content="https://travel-mania.org/online-excursions/">
                        <p class="breadcrumbs__text">
                            <span itemprop="name">–û–Ω–ª–∞–π–Ω —ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É</span>
                        </p>
                        <meta itemprop="position" content="2">
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="border-box js-container-tags">
                <h2>–û–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –∏ –≤–µ–±–∏–Ω–∞—Ä—ã </h2>
                <div class="border-box__text">
                    <p>–û–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –≤–∏–¥–µ ¬´–∂–∏–≤–æ–π¬ª —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ–≤–æ–¥–∏—Ç –≥–∏–¥ –≥—É–ª—è—è –ø–æ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º –∏ —É–ª–∏—Ü–∞–º –≥–æ—Ä–æ–¥–∞. –í–µ–±–∏–Ω–∞—Ä—ã ‚Äì —ç—Ç–æ –ø—Ä–æ–≥—É–ª–∫–∏ –ø–æ –≥–æ—Ä–æ–¥—É –≤ Google Street View —Å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –≥–∏–¥–∞.</p>
                </div>
                <section class="list-tags">
                    <div class="container">
                        <div class="list-tags-wrap">
                            <a class="active all link" href="/online-excursions/">
                                <span>–í—Å–µ</span>
                            </a>
                            <?php foreach ($list as $item) {

                                // REPLACE CITY
                                $cityBefore = str_replace('√©', 'e', $item->city->name_en);
                                $cityBefore = str_replace('—ë', 'e', $cityBefore);
                                $cityBefore = str_replace("'", '', $cityBefore);
                                $cityBefore = str_replace("'", '', $cityBefore);
                                $cityBefore = str_replace("+", '-', $cityBefore);
                                $cityBefore = str_replace("+", '-', $cityBefore);
                                $cityBefore = str_replace(" ", '-', $cityBefore);
                                $cityBefore = str_replace(" ", '-', $cityBefore);
                                $cityBefore = str_replace("√≥", 'o', $cityBefore);
                                if ($cityBefore == 'Villefranche-sur-Sa√¥ne') {
                                    $cityBefore = "Villefranche-sur-Saone";
                                }
                            ?>
                                <a class="link" href="/online-excursions/<?php echo ($cityBefore); ?>/">
                                    <span><?php echo ($item->city->name_ru); ?></span>
                                </a>
                            <?php } ?>
                        </div>
                    </div>
                </section>
                <section class="list-tags js-list-tags">
                    <div class="container">
                        <div class="list-tags-wrap">
                            <a class="all active open-link-def link" data-link="/online-excursions">
                                <span>–í—Å–µ</span>
                            </a>
                            <?php foreach ($list as $item) {

                                // REPLACE CITY
                                $cityBefore = str_replace('√©', 'e', $item->city->name_en);
                                $cityBefore = str_replace('—ë', 'e', $cityBefore);
                                $cityBefore = str_replace("'", '', $cityBefore);
                                $cityBefore = str_replace("'", '', $cityBefore);
                                $cityBefore = str_replace("+", '-', $cityBefore);
                                $cityBefore = str_replace("+", '-', $cityBefore);
                                $cityBefore = str_replace(" ", '-', $cityBefore);
                                $cityBefore = str_replace(" ", '-', $cityBefore);
                                $cityBefore = str_replace("√≥", 'o', $cityBefore);
                                if ($cityBefore == 'Villefranche-sur-Sa√¥ne') {
                                    $cityBefore = "Villefranche-sur-Saone";
                                }
                            ?>
                                <div class="open-link-def link" data-link="/online-excursions/<?php echo ($cityBefore); ?>/">
                                    <span><?php echo ($item->city->name_ru); ?></span>
                                </div>
                            <?php } ?>
                            <div class="icon-open-list-tag">
                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 172 172" style=" fill:#000000;">
                                    <g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                        <path d="M0,172v-172h172v172z" fill="none"></path>
                                        <g fill="#2ecc71">
                                            <path d="M150.5,79.6145v0c0,-9.5245 -10.61383,-15.20767 -18.54017,-9.92583l-45.95983,30.64467l-45.95983,-30.6375c-7.92633,-5.28183 -18.54017,0.39417 -18.54017,9.91867v0c0,3.98467 1.99233,7.71133 5.3105,9.92583l51.24167,34.15633c4.816,3.21067 11.08683,3.21067 15.90283,0l51.24167,-34.15633c3.311,-2.2145 5.30333,-5.934 5.30333,-9.92583z"></path>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </section>

    <section class="popular-tours tours">
        <div class="container">
            <div id="slick-tours" class="slick-tours row">
                <?php $count = 1 ?>
                <?php $countReviews = 0 ?>
                <?php foreach ($list as $item) {

                    // REPLACE CITY
                    $cityBefore = str_replace('√©', 'e', $item->city->name_en);
                    $cityBefore = str_replace('—ë', 'e', $cityBefore);
                    $cityBefore = str_replace("'", '', $cityBefore);
                    $cityBefore = str_replace("'", '', $cityBefore);
                    $cityBefore = str_replace("+", '-', $cityBefore);
                    $cityBefore = str_replace("+", '-', $cityBefore);
                    $cityBefore = str_replace(" ", '-', $cityBefore);
                    $cityBefore = str_replace(" ", '-', $cityBefore);
                    $cityBefore = str_replace("√≥", 'o', $cityBefore);
                    if ($cityBefore == 'Villefranche-sur-Sa√¥ne') {
                        $cityBefore = "Villefranche-sur-Saone";
                    }

                    // REPLACE COUNTRY
                    $countryBefore = str_replace('√©', 'e', $item->city->country->name_en);
                    $countryBefore = str_replace('—ë', 'e', $countryBefore);
                    $countryBefore = str_replace("'", '', $countryBefore);
                    $countryBefore = str_replace("'", '', $countryBefore);
                    $countryBefore = str_replace("+", '-', $countryBefore);
                    $countryBefore = str_replace("+", '-', $countryBefore);
                    $countryBefore = str_replace(" ", '-', $countryBefore);
                    $countryBefore = str_replace(" ", '-', $countryBefore);
                    $countryBefore = str_replace("√≥", 'o', $countryBefore);
                ?>
                    <div class="slick-tours__item">
                        <div class="slick-tours__wrap">
                            <div class="slick-tours__item-img ">
                                <?php
                                $countImg = 0;
                                $arrayImg = [];
                                foreach ($item->photos as $img) {
                                    if ($countImg != 0 && $countImg <= 6) {
                                        array_push($arrayImg,  $img->thumbnail);
                                    }
                                    $countImg++;
                                }
                                ?>
                                <a class="link" href="/<?php echo ($countryBefore); ?>/<?php echo ($cityBefore); ?>/excursion-<?php echo ($item->id); ?>/" data-images="<?php echo htmlspecialchars(json_encode($arrayImg)) ?>">
                                    <img class="static lazyload" data-src="<?php echo $item->photos['0']->thumbnail ?>" alt="">
                                </a>
                                <?php if ($item->price->discount->value) { ?>
                                    <div class="slick-tours__item-img-box">
                                        <span>–°–∫–∏–¥–∫–∞</span> <br>
                                        <span class="slick-tours__item-img-span "><?php echo ($item->price->discount->value * 100) ?>%</span>
                                    </div>
                                <?php } ?>
                                <?php if ($item->type == "group") { ?>
                                    <div class="slick-tours__tag">–ì—Ä—É–ø–ø–æ–≤–∞—è</div>
                                <?php } else if ($item->type == "private") { ?>
                                    <div class="slick-tours__tag">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è</div>
                                <?php } else { ?>
                                <?php } ?>
                            </div>
                            <div class="item-time-rating">
                                <span class="item-time">
                                    <img class="lazyload" data-src="/assets/images/icon-time.png" alt=""> <span><?php echo $item->duration ?> </span>
                                </span>
                                <?php if ($item->rating) { ?>
                                    <span class="item-rating">
                                        <span style="display:none;" class="reviews-rating"><?php echo $item->rating ?> </span>
                                        <div class="star-rating-item">
                                            <span class="reviews-rating-img" style="width: <?php echo ($item->rating * 20) ?>%">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                            </span>
                                            <span class="reviews-rating-img bac">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                                <img class="icon-star lazyload" data-src="/assets/images/icon-star-1.png" alt="">
                                            </span>
                                        </div>
                                    </span>
                                <?php } ?>
                            </div>
                            <div class="tours__item-content ">
                                <div class="item-title ">
                                    <a href="/<?php echo ($countryBefore); ?>/<?php echo ($cityBefore); ?>/excursion-<?php echo ($item->id); ?>/"><?php echo $item->title ?> </a>
                                </div>
                                <div class="item-price-guide">
                                    <div class="item-guide">
                                        <div class="item-guide-photo"> <img class="lazyload" data-src="<?php echo $item->guide->avatar->medium  ?>" alt=""> </div>
                                        <div class="item-guide-name">
                                            <span><?php echo $item->guide->first_name ?></span>
                                            <a class="red" href="/<?php echo ($countryBefore); ?>/<?php echo ($cityBefore); ?>/">–†–∏–º</a>
                                        </div>
                                    </div>

                                    <?php array_push($priceAll, $item->price->value); ?>
                                    <?php if ($item->rating) {
                                        $reviewsAll = $reviewsAll + $item->rating;
                                        $countReviews++;
                                    }; ?>
                                    <?php if ($item->review_count) {
                                        $reviewsAllCount = $reviewsAllCount + $item->review_count;
                                    }; ?>
                                    <div class="item-price">
                                        <div class="item-price-value"> <?php echo $item->price->value . ' ' . $item->price->currency ?></div>
                                        <div class="item-price-people"> <?php echo $item->price->unit_string  ?> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <?php $count++ ?>
                <?php } ?>
            </div>
            <div class="load-tour" style="display: none;margin: 20px 0;text-align: center;"> <img style="width:35px;" src="/assets/images/2.gif" alt=""></div>
            <?php if ($urlNext) { ?>
                <button id="btn-more" class="btn-more more-text" data-url-next="<?php echo ($urlNext) ?>">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë... (<span class="text-span"></span> –∏–∑ <?php echo ($countCity); ?>)</button>
            <?php } ?>
        </div>
    </section>
    <div itemscope="itemscope" itemtype="http://schema.org/Product">
        <meta itemprop="name" content="<?php echo ("–ê–≤—Ç–æ—Ä—Å–∫–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏" . $list[0]->city->in_obj_phrase); ?>">
        <noindex>
            <meta itemprop="description" content="üü¢  –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–Ω–ª–∞–π–Ω-—ç–∫—Å–∫—É—Ä—Å–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É —Å –≥–∏–¥–∞–º–∏. –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–∫—É—Ä—Å–∏–π —Å –∂–∏–≤–æ–π –æ–Ω–ª–∞–π–Ω-—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–µ–π. –ó–∞–∫–∞–∑—ã–≤–∞–π –∏ —Å–º–æ—Ç—Ä–∏ –æ–Ω–ª–∞–π–Ω –≤ —É–¥–æ–±–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.">
            <span itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/AggregateOffer">
                <meta itemprop="lowPrice" content="<?php echo (min($priceAll)) ?>">
                <meta itemprop="highPrice" content="<?php echo (max($priceAll)) ?>">
                <meta itemprop="priceCurrency" content="<?php echo ($list[0]->price->currency); ?>"></span>
        </noindex>
        <span itemprop="aggregateRating" itemscope="itemscope" itemtype="http://schema.org/AggregateRating">
            <?php if (($reviewsAll / $countReviews) > 0) { ?>
                <meta itemprop="ratingValue" content="<?php echo ($reviewsAll / $countReviews); ?>">
            <?php } ?>
            <?php if ($reviewsAllCount > 0) { ?>
                <meta itemprop="reviewCount" content="<?php echo ($reviewsAllCount); ?>">
            <?php } ?>
        </span>
    </div>
    <section class="video">
        <div class="container">
            <div class="border-box">
                <div class="advantages-wrap">
                    <div class="advantages-item">
                        <h3>–ñ–∏–≤—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ —Å –≥–∏–¥–æ–º</h3>
                        <div class="advantages-text">
                            –≠—Ç–æ –∂–∏–≤–∞—è —ç–∫—Å–∫—É—Ä—Å–∏–∏ - –Ω–µ –≤–∏–¥–µ–æ –∑–∞–ø–∏—Å—å! –ì–∏–¥ –ø—Ä–æ–≤–æ–¥–∏—Ç —ç–∫—Å–∫—É—Ä—Å–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≤–µ–±–∏–Ω–∞—Ä–∞ –∏–ª–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—è —Å —É–ª–∏—Ü—ã.
                        </div>
                    </div>
                    <div class="advantages-item">
                        <h3>–û–±—â–µ–Ω–∏–µ –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ</h3>
                        <div class="advantages-text">
                            –û–±—â–∞–π—Ç–µ—Å—å —Å –≥–∏–¥–æ–º –∏ –¥—Ä—É–≥–∏–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏, –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–≥–¥–∞ –≤–∞–º —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.
                        </div>
                    </div>
                    <div class="advantages-item">
                        <h3>–ö–∞–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å?</h3>
                        <div class="advantages-text">
                            –≠–∫—Å–∫—É—Ä—Å–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ Zoom. –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω, –ø–ª–∞–Ω—à–µ—Ç –∏–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä.
                        </div>
                    </div>
                    <div class="advantages-item">
                        <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
                        <div class="advantages-text">
                            –ü–æ—Å–ª–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –í–∞–º –±—É–¥—É—Ç –æ–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥, —Ñ–∏–ª—å–º–æ–≤, —Å—Ç–∞—Ç–µ–π, –¥–ª—è –ª—É—á—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è —Ç–µ–º—ã.
                        </div>
                    </div>
                    <div class="advantages-item">
                        <h3>–°–∫–∏–¥–∫–∞ –Ω–∞ —ç–∫—Å–∫—É—Ä—Å–∏—é –≥–∏–¥–∞</h3>
                        <div class="advantages-text">
                            –ü–æ—Å–ª–µ –æ–Ω–ª–∞–π–Ω —ç–∫—Å–∫—É—Ä—Å–∏–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–µ—Å—Å—Ä–æ—á–Ω—É—é —Ä–∞–∑–æ–≤—É—é —Å–∫–∏–¥–∫—É –Ω–∞ –ª—é–±—É—é —ç–∫—Å–∫—É—Ä—Å–∏—é –≥–∏–¥–∞. –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Å–∫–∏–¥–∫–æ–π, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var timeout = false;
            let coordinatesYT = window.pageYOffset;
            let coordinatesYB = coordinatesYT + window.innerHeight;
            let elements = document.querySelectorAll(".slick-tours__item-img ");
            let elementsArray = [];
            let currentElement;
            let urlNextListCity = $(".popular-tours .btn-more").data("url-next");
            let sliderTour;
            let xhrOne = null;
            $(".country-btn-wrap .btn-title").on("click", function() {
                $(".country-btn-wrap .btn-block").toggleClass("active");
            })
            if (window.innerWidth > 560) {
                initslidertour();
            } else {
                editElemsTour();
            }
            if ($(".popular-tours .btn-more").length) {
                $(".popular-tours .btn-more").on("click", function() {
                    $(".load-tour").show();
                    $(this).hide();
                    if (xhrOne !== null) {
                        xhrOne.abort();
                    };
                    xhrOne = null;
                    xhrOne = new XMLHttpRequest();
                    let data = null;
                    xhrOne.open('GET', urlNextListCity + "&format=json", true);
                    xhrOne.send();
                    xhrOne.onreadystatechange = function() {
                        if (xhrOne.readyState == 4) {
                            if (xhrOne.status == 200) {
                                data = jQuery.parseJSON(xhrOne.responseText);
                                addTours(data.results, data.next);
                                $(".load-tour").hide();
                                $(".tours .slick-tours__item").show();
                            }
                        }
                    };
                })
            }

            function replaceName(type, value) {
                switch (type) {
                    case "noEm":
                        let newStr1 = value.replace('<em>', '').replace('<em>', '').replace('</em>', '').replace('</em>', '');
                        return newStr1;
                        break;
                    case "noSpace":
                        let newStr2 = value.replace("_", "-").replace("_", "-").replace("+", "-").replace("+", "-").replace(" ", "-").replace(" ", "-").replace("√©", "e").replace("—ë", "e").replace("√≥", "o").replace("Villefranche-sur-Sa√¥ne", "Villefranche-sur-Saone");
                        return newStr2;
                        break;
                    case "cityCountry":
                        let newStr3 = value.replace('`', '').replace("'", "");
                        return newStr3;
                        break;
                    default:
                        break;
                }
            }

            function addTours(result, nextUrl) {
                result.map((item) => {
                    let country = replaceName("cityCountry", item.city.country.name_en);
                    let newCountry = replaceName("noSpace", country);
                    let city = replaceName("cityCountry", item.city.name_en);
                    let newCity = replaceName("noSpace", city);
                    let arrImages = [];
                    item.photos.map((img, index) => {
                        if (index < 7) {
                            arrImages.push(img.thumbnail);
                        }
                    });
                    arrImages.shift();
                    arrImages = JSON.stringify(arrImages);
                    let discount = "";
                    let tagName = "";
                    let ratingCount = "";
                    if (item.price.discount && item.price.discount.value) {
                        discount = `<div class="slick-tours__item-img-box"><span>–°–∫–∏–¥–∫–∞</span> <br><span class="slick-tours__item-img-span ">${item.price.discount.value * 100}%</span>  </div>`;
                    }
                    if (item.type == "group") {
                        tagName = `<div class="slick-tours__tag">–ì—Ä—É–ø–ø–æ–≤–∞—è</div>`;
                    } else if (item.type == "private") {
                        tagName = `<div class="slick-tours__tag">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è</div>`;
                    } else {}
                    if (item.rating) {
                        ratingCount = `<span class="item-rating"><span style="display:none;" class="reviews-rating">${item.rating}</span><div class="star-rating-item"><span class="reviews-rating-img" style="width: ${item.rating * 20}%"><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""></span><span class="reviews-rating-img bac"><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""><img class="icon-star " src="/assets/images/icon-star-1.png" alt=""></span></div></span>`;
                    }
                    $("#slick-tours").append(`<div style="display: none;" class="slick-tours__item"><div class="slick-tours__wrap"><div class="slick-tours__item-img "> <a class="link" href="/${newCountry}/${newCity}/excursion-${item.id}/" data-images='${arrImages}'><img class="static " src="${item.photos['0'].thumbnail}" alt=""></a>${discount} ${tagName}</div><div class="item-time-rating"><span class="item-time">  <img class="" src="/assets/images/icon-time.png" alt=""> <span>${item.duration}</span></span>${ratingCount}</div><div class="tours__item-content "><div class="item-title "><a href="/${newCountry}/${newCity}/excursion-${item.id}/">${item.title}</a></div><div class="item-price-guide"><div class="item-guide"><div class="item-guide-photo"> <img class="" src="${item.guide.avatar.medium}" alt=""> </div><div class="item-guide-name">${item.guide.first_name}<br></div></div><div class="item-price"><div class="item-price-value">${item.price.value} ${item.price.currency}</div><div class="item-price-people">${item.price.unit_string}</div></div></div></div></div></div>`);
                })

                if (nextUrl) {
                    urlNextListCity = nextUrl;
                    $(".popular-tours .btn-more").show();
                }
                initslidertour();
                if ($(".more-text.btn-more").length) {
                    $(".more-text.btn-more .text-span").text($(".tours .slick-tours__item").length)
                }
            }

            function editElemsTour() {
                elements.forEach(function(elem) {
                    if (!elem.classList.contains("hide")) {
                        elementsArray.push({
                            element: elem,
                            top: elem.getBoundingClientRect().top,
                            bottom: coordinatesYB - elem.getBoundingClientRect().bottom,
                            rate: 0
                        })
                    }
                })

                window.onscroll = function() {
                    if (timeout !== false) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(function() {
                        editCoordinates();
                    }, 100);
                };
                editCoordinates();

                function editCoordinates() {
                    coordinatesYT = window.pageYOffset;
                    coordinatesYB = coordinatesYT + window.innerHeight;

                    elementsArray.forEach(function(elem) {
                        elem.top = elem.element.getBoundingClientRect().top;
                        elem.bottom = coordinatesYB - elem.element.getBoundingClientRect().bottom;
                        elem.rate = calculateRate(elem.element.getBoundingClientRect(), elem.element);
                    })
                }

                function calculateRate(rect, item) {
                    let rateTop = rect.top + pageYOffset;
                    if (rateTop >= pageYOffset && rect.bottom + pageYOffset <= coordinatesYB) {
                        if (currentElement != item) {
                            edidVisual(item, true);
                            currentElement = item;
                        }
                    } else {
                        edidVisual(item, false);
                    }
                }

                function edidVisual(item, pause) {
                    if (pause) {
                        let urls = $(item).find(".link").data("images");
                        if (!$(item).find(".new-img").length) {
                            for (i = 0; i < urls.length; i++) {
                                $(item).find(".link").append('<img class="new-img" src="' + urls[i] + '" />');
                            }
                        }
                        if ($(item).find(".slick-track").length == 0) {
                            $(item).find(".link").on('init', function(event, slick) {
                                var initSlide = slick.slickCurrentSlide();
                                var slickDots = slick.$dots[0];
                                slickDots.childNodes[initSlide].classList.add("slick-current");
                            });
                            $(item).find(".link").on('beforeChange', function(event, slick, currentSlide, nextSlide) {
                                var slickDots = slick.$dots[0];
                                slickDots.childNodes[currentSlide].classList.remove("slick-current");
                                slickDots.childNodes[nextSlide].classList.add("slick-current");
                            });
                            $(item).find(".link").slick({
                                arrows: false,
                                dots: true,
                                autoplay: true,
                                autoplaySpeed: 2000,
                                pauseOnHover: false,
                                pauseOnFocus: false,
                                fade: true,
                                cssEase: 'linear'
                            });
                        } else {
                            $(item).find(".link .slick-active").addClass("slick-current");
                            $(item).find(".link .slick-dots").css("opacity", "1");
                            $(item).find(".link").slick('slickPlay');
                        }
                    } else {
                        if ($(item).find(".slick-track").length) {
                            $(item).find(".link .slick-dots").css("opacity", "0");
                            $(item).find(".link .slick-active").removeClass("slick-current");
                            $(item).find(".link").slick('slickPause');
                        }
                    }
                }
            }

            function initslidertour() {
                if (window.innerWidth > 768) {
                    $(".slick-tours__item").hover(
                        function() {
                            let urls = $(this).find(".link").data("images");
                            if (!$(this).find(".new-img").length) {
                                for (i = 0; i < urls.length; i++) {
                                    $(this).find(".link").append('<img class="new-img" src="' + urls[i] + '" />');
                                }
                            }
                            if ($(this).find(".slick-track").length == 0) {
                                $(this).find(".link").on('init', function(event, slick) {
                                    var initSlide = slick.slickCurrentSlide();
                                    var slickDots = slick.$dots[0];
                                    slickDots.childNodes[initSlide].classList.add("slick-current");
                                });
                                $(this).find(".link").on('beforeChange', function(event, slick, currentSlide, nextSlide) {
                                    var slickDots = slick.$dots[0];
                                    slickDots.childNodes[currentSlide].classList.remove("slick-current");
                                    slickDots.childNodes[nextSlide].classList.add("slick-current");
                                });
                                $(this).find(".link").slick({
                                    arrows: false,
                                    dots: true,
                                    autoplay: true,
                                    autoplaySpeed: 2000,
                                    pauseOnHover: false,
                                    pauseOnFocus: false,
                                    fade: true,
                                    cssEase: 'linear'
                                });
                            } else {
                                $(this).find(".link .slick-active").addClass("slick-current");
                                $(this).find(".link").slick('slickPlay');
                                $(this).find(".link .slick-dots").css("opacity", "1");
                            }
                        },
                        function() {
                            $(this).find(".link .slick-active").removeClass("slick-current");
                            $(this).find(".link").slick('slickPause');
                            $(this).find(".link .slick-dots").css("opacity", "0");
                        }
                    );
                }
            }
        });
    </script>
    <?php
    include 'inc/footer.php';
    ?>